# SpringBoot项目中遇到的很多坑

## 4.16

- ### SpringBoot与Mybatis整合

  1.SpringBoot与mybatis项目整合时，有可能会遇到项目无法启动的问题。

     在使用mybatis-generator插件逆向生成配置文件时，运行多次插件可能会在一个配置文件中生成重复的代   码。

     生成重复代码会导致程序无法运行起来。

     可能会报的错误

  ```java
  Result Maps collection already contains value for com.dao.UserMapper.BaseResultMap
  ```

     意思就是id为BaseResultMap在一个xml文件中出现多次。

​        2.SpringBoot中的启动类的注解问题

```java
@SpringBootApplication(scanBasePackages = "com")
@MapperScan(basePackages = "com.dao")
```

 springboot中的启动类之上需要有这两个注解，第一个表示项目启动时自动扫描com包下的所有注解；第二个表示项目启动时自动给dao包下的所有类加上mapper注解（也可以一个一个加上mapper注解）

- ### 插入用户的一些小问题

  因为在设置密码的时候，数据库需要将密码进行MD5加密，所以！要将数据库中password的长度定的长一些，因为MD5加密后密码会变得很长！！！
  
- ### 关于jar包

  因为在上传头像或者是上传图片现在用的是七牛云存储，今天把jar包先复制粘贴到了pom文件里面，随之又把七牛云的类传到了项目中。。然后发现全是红色错误。。

  后来才知道是因为maven工程中并没有立即把七牛的jar包导入进去。

  解决方法：

  右上角的maven工程 可以选择reimport，反正就是重新导入一下！！

- ### 关电脑前的想法

  今天学习效率不高不低，但是因为是周四，脑子里有想出去玩又想学习。希望以后的周四改进8。

  目前觉得写学习笔记真的很好，希望以后写项目遇到bug可以继续记录，积累更多经验，防止以后入坑！！！

  

  ## 4.24更新

  ### 0:17
  
  最近开始写一个诗词的项目，跟之前的项目不同，这个项目需要提前录入大量的诗词以及使人的数据，但是经过一些挫折还是基本解决问题啦！
  
  #### 关于录入数据
  
  首先，可以在一个诗词库中获取所有的诗词资源，但是！数据太多了并不是所有数据都是有用数据，目前我只提取了唐诗宋词的诗句。
  
  首先可以将这个库下载下来供自己来使用。但是数据的形式全部都是json文件，这就需要用一个controller来将json文件中的数据解析到pojo中然后调用dao层的接口才传入数据库。
  
  但是会遇到很多奇奇怪怪的字符！！导致无法插入到数据库里面。因为数据庞大，所以可以用一个循环来控制不同的文件，然后每次遇到异常之后就打印该条记录的关键字并跳过该记录。
  
  对于这些有异常的数据可以单独插入。
  
  注意！这里用异常处理指的是在插入时编码出了问题，如果是sql语法的问题还需要重新找原因。
  
  #### 关于sql语法
  
  在插入作者信息的时候发现一直报语法错误但是，所有信息都无误，后来百度之后才知道是因为列名中出现了关键字。这时候要么就修改列名要么就将关键字用``引用起来才可以。
  
  注意！不是单引号是``
  
  
  
  明天继续加油吧
  
  晚安。
  
  
  
  ## 4.26更新
  
  ### 关于 mybatis-generator生成器
  
  刚才在写注册接口的时候，我本来是直接粘贴了上一个项目中的注册接口，然后发现插入数据失败啦。一看是dao层出了问题，我看着调用的方法时生成器写好的方法咋会失败……
  
  结果是这个生成器生成的pojo层的实体类是上一个数据库中同名的实体类。。。。迷惑
  
  然后百度解决啦！需要在生成器的配置文件中加一句配置
  
  **[generatorConfig.xml]**
  
  ```xml
    <!--jdbc的数据库连接 -->
          <jdbcConnection
                  driverClass="${db.driverClassName}"
                  connectionURL="${db.url}"
                  userId="${db.username}"
                  password="${db.password}">
               (ps:下面这一句是重点)
              <property name="nullCatalogMeansCurrent" value="true"/>
          </jdbcConnection>
  ```
  
  
  
  ## 4.28更新
  
  - ### 怎样确定(七牛云)的加速域名是否解析正确？
  
    windows系统下可以通过
  
      nslookup+加速域名 回车查看是否解析正确
  
    linux/mac系统下可以通过 dig+加速域名 回车查看

## 5.3更新

- ### 昨天晚上在centos下传项目遇到了一个问题：

   当我把修改好的项目打成jar包传上去的时候，启动项目出现了无法启动的项目，发现一直运行的还是之前的jar包对应的项目。

  这是因为一开始设置的后台一直运行这个项目，必须先要杀死这个进程(如果修改好的项目端口改变的话可以不管这个)，然后重新执行新的jar包。

  对应的centos命令为：

   **根据端口查看这个进程的pid** 

  ```
  netstat -lnp|grep 8080   #8080请换为你的apache需要的端口
  ```

   **查看进程的详细信息**

```
  ps 1777    #1777就是上一步得到的pid
```

​         **杀掉进程** 

```
 kill -9 [PID]  #-9 表示强迫进程立即停止
```

